module.exports=[56704,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-async-storage.external.js",()=>require("next/dist/server/app-render/work-async-storage.external.js"))},32319,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-unit-async-storage.external.js",()=>require("next/dist/server/app-render/work-unit-async-storage.external.js"))},20635,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/action-async-storage.external.js",()=>require("next/dist/server/app-render/action-async-storage.external.js"))},34150,(a,b,c)=>{"use strict";b.exports=a.r(96048).vendored.contexts.HooksClientContext},31721,(a,b,c)=>{"use strict";b.exports=a.r(96048).vendored.contexts.ServerInsertedHtml},28340,a=>{a.v({button:"Schedule-module__I33aDW__button",buttonDanger:"Schedule-module__I33aDW__buttonDanger",buttonPrimary:"Schedule-module__I33aDW__buttonPrimary",buttonSecondary:"Schedule-module__I33aDW__buttonSecondary",buttons:"Schedule-module__I33aDW__buttons",card:"Schedule-module__I33aDW__card",cardBadge:"Schedule-module__I33aDW__cardBadge",cardCompleted:"Schedule-module__I33aDW__cardCompleted",cardDescription:"Schedule-module__I33aDW__cardDescription",cardHeader:"Schedule-module__I33aDW__cardHeader",cardMeta:"Schedule-module__I33aDW__cardMeta",cardTitle:"Schedule-module__I33aDW__cardTitle",checkbox:"Schedule-module__I33aDW__checkbox",colorOption:"Schedule-module__I33aDW__colorOption",colorPicker:"Schedule-module__I33aDW__colorPicker",empty:"Schedule-module__I33aDW__empty",error:"Schedule-module__I33aDW__error",form:"Schedule-module__I33aDW__form",formGroup:"Schedule-module__I33aDW__formGroup",input:"Schedule-module__I33aDW__input",label:"Schedule-module__I33aDW__label",list:"Schedule-module__I33aDW__list",listHeader:"Schedule-module__I33aDW__listHeader",listTitle:"Schedule-module__I33aDW__listTitle",nonInteractive:"Schedule-module__I33aDW__nonInteractive",required:"Schedule-module__I33aDW__required",scheduleItems:"Schedule-module__I33aDW__scheduleItems",select:"Schedule-module__I33aDW__select",selected:"Schedule-module__I33aDW__selected",textarea:"Schedule-module__I33aDW__textarea",timeRow:"Schedule-module__I33aDW__timeRow"})},24050,a=>{"use strict";function b(a,b,d){let e=[],f=new Date(a,b-1,1),g=new Date(a,b,0),h=new Date;h.setHours(0,0,0,0);let i=f.getDay(),j=new Date(a,b-1,0).getDate();for(let f=i-1;f>=0;f--){let g=new Date(a,b-2,j-f);e.push({date:g,isCurrentMonth:!1,isToday:!1,schedules:c(g,d)})}for(let f=1;f<=g.getDate();f++){let g=new Date(a,b-1,f),i=new Date(g);i.setHours(0,0,0,0),e.push({date:g,isCurrentMonth:!0,isToday:i.getTime()===h.getTime(),schedules:c(g,d)})}let k=7-e.length%7;if(k<7)for(let f=1;f<=k;f++){let g=new Date(a,b,f);e.push({date:g,isCurrentMonth:!1,isToday:!1,schedules:c(g,d)})}return e}function c(a,b){let c=d(a);return b.filter(a=>a.date===c).sort((a,b)=>a.startTime.localeCompare(b.startTime))}function d(a){let b=a.getFullYear(),c=String(a.getMonth()+1).padStart(2,"0"),d=String(a.getDate()).padStart(2,"0");return`${b}-${c}-${d}`}function e(a,b){return`${a}年${b}月`}function f(a){return["日","月","火","水","木","金","土"][a]}function g(a){return!!/^\d{4}-\d{2}-\d{2}$/.test(a)&&!isNaN((function(a){let[b,c,d]=a.split("-").map(Number);return new Date(b,c-1,d)})(a).getTime())}function h(a){if(!/^\d{2}:\d{2}$/.test(a))return!1;let[b,c]=a.split(":").map(Number);return b>=0&&b<24&&c>=0&&c<60}function i(a,b){return a<b}a.s(["formatDate",()=>d,"generateCalendarDays",()=>b,"getDayName",()=>f,"getMonthName",()=>e,"isValidDate",()=>g,"isValidTime",()=>h,"isValidTimeRange",()=>i])},98295,a=>{"use strict";a.s(["CATEGORIES",0,[{value:"work",label:"仕事",defaultColor:"#3B82F6"},{value:"private",label:"プライベート",defaultColor:"#10B981"},{value:"event",label:"イベント",defaultColor:"#F59E0B"},{value:"other",label:"その他",defaultColor:"#8B5CF6"}]])},43970,a=>{a.v({calendar:"Calendar-module__G1O1Vq__calendar",container:"Calendar-module__G1O1Vq__container",day:"Calendar-module__G1O1Vq__day",dayNumber:"Calendar-module__G1O1Vq__dayNumber",days:"Calendar-module__G1O1Vq__days",error:"Calendar-module__G1O1Vq__error",gotoButton:"Calendar-module__G1O1Vq__gotoButton",gotoForm:"Calendar-module__G1O1Vq__gotoForm",gotoInput:"Calendar-module__G1O1Vq__gotoInput",gotoSelect:"Calendar-module__G1O1Vq__gotoSelect",header:"Calendar-module__G1O1Vq__header",loading:"Calendar-module__G1O1Vq__loading",monthTitle:"Calendar-module__G1O1Vq__monthTitle",navButton:"Calendar-module__G1O1Vq__navButton",navigation:"Calendar-module__G1O1Vq__navigation",otherMonth:"Calendar-module__G1O1Vq__otherMonth",saturday:"Calendar-module__G1O1Vq__saturday",scheduleCount:"Calendar-module__G1O1Vq__scheduleCount",scheduleItem:"Calendar-module__G1O1Vq__scheduleItem",scheduleList:"Calendar-module__G1O1Vq__scheduleList",sunday:"Calendar-module__G1O1Vq__sunday",today:"Calendar-module__G1O1Vq__today",todayButton:"Calendar-module__G1O1Vq__todayButton",weekDay:"Calendar-module__G1O1Vq__weekDay",weekDays:"Calendar-module__G1O1Vq__weekDays"})},94442,a=>{"use strict";var b=a.i(56993),c=a.i(91108),d=a.i(3859),e=a.i(24050),f=a.i(43970),g=a.i(98295),h=a.i(28340);function i({initialDate:a,onClose:f,onSaved:i}){(0,d.useRouter)();let[j,k]=(0,c.useState)(!1),[l,m]=(0,c.useState)({date:(0,e.formatDate)(a),startTime:"09:00",endTime:"10:00",title:"",description:"",category:"other",color:g.CATEGORIES[3].defaultColor,completed:!1}),n=async a=>{if(a.preventDefault(),!l.title.trim())return void alert("タイトルを入力してください");try{k(!0);let a=await fetch("/api/schedules",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(l)}),b=await a.json();b.success?i():alert(b.error||"保存に失敗しました")}catch(a){console.error("Failed to save schedule:",a),alert("保存中にエラーが発生しました")}finally{k(!1)}};return(0,b.jsx)("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},onClick:f,children:(0,b.jsxs)("div",{style:{backgroundColor:"white",padding:"24px",borderRadius:"8px",maxWidth:"500px",width:"90%",maxHeight:"90vh",overflow:"auto"},onClick:a=>a.stopPropagation(),children:[(0,b.jsxs)("h2",{style:{marginBottom:"20px",fontSize:"20px",fontWeight:"600"},children:["予定を追加 - ",(0,e.formatDate)(a)]}),(0,b.jsxs)("form",{onSubmit:n,children:[(0,b.jsxs)("div",{style:{marginBottom:"16px"},children:[(0,b.jsxs)("label",{style:{display:"block",marginBottom:"6px",fontWeight:"600"},children:["タイトル",(0,b.jsx)("span",{style:{color:"#ef4444"},children:"*"})]}),(0,b.jsx)("input",{type:"text",value:l.title,onChange:a=>m(b=>({...b,title:a.target.value})),className:h.default.input,placeholder:"予定のタイトル",autoFocus:!0})]}),(0,b.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"12px",marginBottom:"16px"},children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{style:{display:"block",marginBottom:"6px",fontWeight:"600"},children:"開始時間"}),(0,b.jsx)("input",{type:"time",value:l.startTime,onChange:a=>m(b=>({...b,startTime:a.target.value})),className:h.default.input})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{style:{display:"block",marginBottom:"6px",fontWeight:"600"},children:"終了時間"}),(0,b.jsx)("input",{type:"time",value:l.endTime,onChange:a=>m(b=>({...b,endTime:a.target.value})),className:h.default.input})]})]}),(0,b.jsxs)("div",{style:{marginBottom:"16px"},children:[(0,b.jsx)("label",{style:{display:"block",marginBottom:"6px",fontWeight:"600"},children:"カテゴリー"}),(0,b.jsx)("select",{value:l.category,onChange:a=>{let b=g.CATEGORIES.find(b=>b.value===a.target.value);m(c=>({...c,category:a.target.value,color:b?.defaultColor||c.color}))},className:h.default.select,children:g.CATEGORIES.map(a=>(0,b.jsx)("option",{value:a.value,children:a.label},a.value))})]}),(0,b.jsxs)("div",{style:{display:"flex",gap:"12px",justifyContent:"flex-end"},children:[(0,b.jsx)("button",{type:"button",onClick:f,className:`${h.default.button} ${h.default.buttonSecondary}`,disabled:j,children:"キャンセル"}),(0,b.jsx)("button",{type:"submit",className:`${h.default.button} ${h.default.buttonPrimary}`,disabled:j,children:j?"保存中...":"保存"})]})]})]})})}function j({onDayClick:a}){let[g,h]=(0,c.useState)(new Date),[j,k]=(0,c.useState)([]),[l,m]=(0,c.useState)([]),[n,o]=(0,c.useState)(!0),[p,q]=(0,c.useState)(null),[r,s]=(0,c.useState)(!1),[t,u]=(0,c.useState)(null),v=g.getFullYear(),w=g.getMonth()+1,x=(0,d.useSearchParams)(),[y,z]=(0,c.useState)(v),[A,B]=(0,c.useState)(w);(0,c.useEffect)(()=>{z(v),B(w)},[v,w]),(0,c.useEffect)(()=>{let a=x?.get?.("focus");if(a){let b=new Date(a);isNaN(b.getTime())||h(new Date(b.getFullYear(),b.getMonth(),1))}},[x]),(0,c.useEffect)(()=>{C()},[v,w]),(0,c.useEffect)(()=>{m((0,e.generateCalendarDays)(v,w,j))},[v,w,j]);let C=async()=>{try{o(!0),q(null);let a=await fetch(`/api/schedules?year=${v}&month=${w}`),b=await a.json();b.success?k(b.data||[]):q(b.error||"予定の取得に失敗しました")}catch(a){q("予定の取得中にエラーが発生しました"),console.error(a)}finally{o(!1)}},D=()=>{s(!1),u(null)},E=async()=>{D(),await C()};return n?(0,b.jsx)("div",{className:f.default.loading,children:"読み込み中..."}):p?(0,b.jsx)("div",{className:f.default.error,children:p}):(0,b.jsxs)("div",{className:f.default.container,children:[(0,b.jsxs)("div",{className:f.default.header,children:[(0,b.jsxs)("div",{className:f.default.navigation,children:[(0,b.jsx)("button",{className:f.default.navButton,onClick:()=>{h(new Date(v,w-2,1))},"aria-label":"前月",children:"← 前月"}),(0,b.jsx)("button",{className:f.default.navButton,onClick:()=>{h(new Date(v,w,1))},"aria-label":"次月",children:"次月 →"})]}),(0,b.jsxs)("form",{className:f.default.gotoForm,onSubmit:a=>{a.preventDefault();let b=Number(y)||v,c=Number(A)||w;c<1&&(c=1),c>12&&(c=12),h(new Date(b,c-1,1))},children:[(0,b.jsx)("input",{type:"number",className:f.default.gotoInput,value:y,onChange:a=>z(Number(a.target.value||0)),"aria-label":"年",min:1900,max:3e3}),(0,b.jsx)("span",{children:"/"}),(0,b.jsx)("select",{className:f.default.gotoSelect,value:A,onChange:a=>B(Number(a.target.value)),"aria-label":"月",children:Array.from({length:12},(a,b)=>b+1).map(a=>(0,b.jsx)("option",{value:a,children:a},a))}),(0,b.jsx)("button",{type:"submit",className:f.default.gotoButton,children:"移動"})]}),(0,b.jsx)("h2",{className:f.default.monthTitle,children:(0,e.getMonthName)(v,w)}),(0,b.jsx)("button",{className:f.default.todayButton,onClick:()=>{h(new Date)},"aria-label":"今日",children:"今日"})]}),(0,b.jsxs)("div",{className:f.default.calendar,children:[(0,b.jsx)("div",{className:f.default.weekDays,children:[0,1,2,3,4,5,6].map(a=>(0,b.jsx)("div",{className:`${f.default.weekDay} ${0===a?f.default.sunday:6===a?f.default.saturday:""}`,children:(0,e.getDayName)(a)},a))}),(0,b.jsx)("div",{className:f.default.days,children:l.map((c,d)=>{let e=c.date.getDay();return(0,b.jsxs)("div",{className:`${f.default.day} ${!c.isCurrentMonth?f.default.otherMonth:""} ${c.isToday?f.default.today:""} ${0===e?f.default.sunday:""} ${6===e?f.default.saturday:""}`,onClick:()=>{a&&a(c.date,c.schedules)},onDoubleClick:()=>{u(c.date),s(!0)},children:[(0,b.jsx)("div",{className:f.default.dayNumber,children:c.date.getDate()}),(0,b.jsxs)("div",{className:f.default.scheduleList,children:[c.schedules.slice(0,3).map(a=>(0,b.jsxs)("div",{className:f.default.scheduleItem,style:{backgroundColor:a.color},title:`${a.startTime} ${a.title}`,children:[a.startTime," ",a.title]},a.id)),c.schedules.length>3&&(0,b.jsxs)("div",{className:f.default.scheduleCount,children:["他 ",c.schedules.length-3," 件"]})]})]},d)})})]}),r&&t&&(0,b.jsx)(i,{initialDate:t,onClose:D,onSaved:E})]})}a.s(["default",()=>j],94442)}];

//# sourceMappingURL=%5Broot-of-the-server%5D__5068a857._.js.map