{"version":3,"sources":["../../../../../calenderapp/node_modules/next/src/server/route-modules/app-page/vendored/contexts/hooks-client-context.ts","../../../../../calenderapp/node_modules/next/src/server/route-modules/app-page/vendored/contexts/server-inserted-html.ts","turbopack:///[project]/calenderapp/components/Schedule/Schedule.module.css [app-ssr] (css module)","../../../../../calenderapp/components/Schedule/ScheduleList.tsx"],"sourcesContent":["module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['contexts'].HooksClientContext\n","module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['contexts'].ServerInsertedHtml\n","__turbopack_context__.v({\n  \"button\": \"Schedule-module__I33aDW__button\",\n  \"buttonDanger\": \"Schedule-module__I33aDW__buttonDanger\",\n  \"buttonPrimary\": \"Schedule-module__I33aDW__buttonPrimary\",\n  \"buttonSecondary\": \"Schedule-module__I33aDW__buttonSecondary\",\n  \"buttons\": \"Schedule-module__I33aDW__buttons\",\n  \"card\": \"Schedule-module__I33aDW__card\",\n  \"cardBadge\": \"Schedule-module__I33aDW__cardBadge\",\n  \"cardCompleted\": \"Schedule-module__I33aDW__cardCompleted\",\n  \"cardDescription\": \"Schedule-module__I33aDW__cardDescription\",\n  \"cardHeader\": \"Schedule-module__I33aDW__cardHeader\",\n  \"cardMeta\": \"Schedule-module__I33aDW__cardMeta\",\n  \"cardTitle\": \"Schedule-module__I33aDW__cardTitle\",\n  \"checkbox\": \"Schedule-module__I33aDW__checkbox\",\n  \"colorOption\": \"Schedule-module__I33aDW__colorOption\",\n  \"colorPicker\": \"Schedule-module__I33aDW__colorPicker\",\n  \"empty\": \"Schedule-module__I33aDW__empty\",\n  \"error\": \"Schedule-module__I33aDW__error\",\n  \"form\": \"Schedule-module__I33aDW__form\",\n  \"formGroup\": \"Schedule-module__I33aDW__formGroup\",\n  \"input\": \"Schedule-module__I33aDW__input\",\n  \"label\": \"Schedule-module__I33aDW__label\",\n  \"list\": \"Schedule-module__I33aDW__list\",\n  \"listHeader\": \"Schedule-module__I33aDW__listHeader\",\n  \"listTitle\": \"Schedule-module__I33aDW__listTitle\",\n  \"nonInteractive\": \"Schedule-module__I33aDW__nonInteractive\",\n  \"required\": \"Schedule-module__I33aDW__required\",\n  \"scheduleItems\": \"Schedule-module__I33aDW__scheduleItems\",\n  \"select\": \"Schedule-module__I33aDW__select\",\n  \"selected\": \"Schedule-module__I33aDW__selected\",\n  \"textarea\": \"Schedule-module__I33aDW__textarea\",\n  \"timeRow\": \"Schedule-module__I33aDW__timeRow\",\n});\n","\"use client\";\n\nimport { useEffect, useState } from \"react\";\nimport { useRouter } from \"next/navigation\";\nimport type { Schedule } from \"@/lib/types\";\nimport styles from \"../Schedule/Schedule.module.css\";\n\nconst DEFAULT_TITLE = \"(無題)\";\n\ntype Grouped = {\n  title: string;\n  items: Schedule[];\n};\n\nfunction sortSchedules(a: Schedule, b: Schedule) {\n  // 日付＋開始時刻で昇順ソート\n  return (a.date + a.startTime).localeCompare(b.date + b.startTime);\n}\n\nfunction groupByTitle(schedules: Schedule[]): Grouped[] {\n  const map = new Map<string, Schedule[]>();\n  for (const s of schedules) {\n    const key = s.title || DEFAULT_TITLE;\n    const arr = map.get(key) || [];\n    arr.push(s);\n    map.set(key, arr);\n  }\n\n  const grouped: Grouped[] = Array.from(map.entries()).map(\n    ([title, items]) => ({ title, items: items.sort(sortSchedules) })\n  );\n\n  // 件数が多い順にソート\n  return grouped.sort((a, b) => b.items.length - a.items.length);\n}\n\nexport default function ScheduleList() {\n  const router = useRouter();\n  const [groups, setGroups] = useState<Grouped[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n\n  useEffect(() => {\n    fetchSchedules();\n  }, []);\n\n  async function fetchSchedules() {\n    setLoading(true);\n    setError(null);\n    try {\n      const res = await fetch(\"/api/schedules\");\n      const data = await res.json();\n      if (!data?.success) {\n        setError(data?.error || \"予定の取得に失敗しました\");\n        setGroups([]);\n        return;\n      }\n\n      const schedules: Schedule[] = data.data || [];\n      setGroups(groupByTitle(schedules));\n    } catch (err) {\n      console.error(err);\n      setError(\"予定一覧の取得中にエラーが発生しました\");\n    } finally {\n      setLoading(false);\n    }\n  }\n\n  if (loading) return <div className={styles.empty}>読み込み中...</div>;\n  if (error) return <div className={styles.error}>{error}</div>;\n\n  return (\n    <div className={styles.list}>\n      <div className={styles.listHeader}>\n        <h2 className={styles.listTitle}>予定一覧（タイトル別）</h2>\n      </div>\n\n      {groups.length === 0 ? (\n        <div className={styles.empty}>予定がありません</div>\n      ) : (\n        <div className={styles.scheduleItems}>\n          {groups.map((g) => (\n            <article key={g.title} className={styles.card}>\n              <div className={styles.cardHeader}>\n                <div className={styles.cardTitle}>\n                  {g.title}\n                  <div className={styles.cardMeta}>\n                    <span>{g.items.length} 件</span>\n                  </div>\n                </div>\n              </div>\n\n              <ul>\n                {g.items.map((s) => (\n                  <li\n                    key={s.id}\n                    onDoubleClick={() => {\n                      // ダブルクリックでカレンダーの該当日に移動\n                      // 日付は YYYY-MM-DD 形式をそのまま渡す\n                      router.push(`/?focus=${encodeURIComponent(s.date)}`);\n                    }}\n                    style={{ cursor: \"pointer\" }}\n                    title=\"ダブルクリックでカレンダーに移動\"\n                  >\n                    <div\n                      className={`${styles.cardMeta} ${styles.nonInteractive}`}\n                    >\n                      <span>\n                        {s.date} {s.startTime}\n                        {s.endTime ? ` - ${s.endTime}` : \"\"}\n                      </span>\n                    </div>\n                    <div\n                      className={`${styles.cardDescription} ${styles.nonInteractive}`}\n                    >\n                      {s.title ? \"\" : \"（タイトルなし）\"}\n                      {s.description || \"\"}\n                    </div>\n                  </li>\n                ))}\n              </ul>\n            </article>\n          ))}\n        </div>\n      )}\n    </div>\n  );\n}\n"],"names":["module","exports","require","vendored","HooksClientContext","ServerInsertedHtml"],"mappings":"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","ignoreList":[0,1]}