module.exports=[56704,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-async-storage.external.js",()=>require("next/dist/server/app-render/work-async-storage.external.js"))},32319,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-unit-async-storage.external.js",()=>require("next/dist/server/app-render/work-unit-async-storage.external.js"))},20635,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/action-async-storage.external.js",()=>require("next/dist/server/app-render/action-async-storage.external.js"))},34150,(a,b,c)=>{"use strict";b.exports=a.r(96048).vendored.contexts.HooksClientContext},31721,(a,b,c)=>{"use strict";b.exports=a.r(96048).vendored.contexts.ServerInsertedHtml},28340,a=>{a.v({button:"Schedule-module__I33aDW__button",buttonDanger:"Schedule-module__I33aDW__buttonDanger",buttonPrimary:"Schedule-module__I33aDW__buttonPrimary",buttonSecondary:"Schedule-module__I33aDW__buttonSecondary",buttons:"Schedule-module__I33aDW__buttons",card:"Schedule-module__I33aDW__card",cardBadge:"Schedule-module__I33aDW__cardBadge",cardCompleted:"Schedule-module__I33aDW__cardCompleted",cardDescription:"Schedule-module__I33aDW__cardDescription",cardHeader:"Schedule-module__I33aDW__cardHeader",cardMeta:"Schedule-module__I33aDW__cardMeta",cardTitle:"Schedule-module__I33aDW__cardTitle",checkbox:"Schedule-module__I33aDW__checkbox",colorOption:"Schedule-module__I33aDW__colorOption",colorPicker:"Schedule-module__I33aDW__colorPicker",empty:"Schedule-module__I33aDW__empty",error:"Schedule-module__I33aDW__error",form:"Schedule-module__I33aDW__form",formGroup:"Schedule-module__I33aDW__formGroup",input:"Schedule-module__I33aDW__input",label:"Schedule-module__I33aDW__label",list:"Schedule-module__I33aDW__list",listHeader:"Schedule-module__I33aDW__listHeader",listTitle:"Schedule-module__I33aDW__listTitle",nonInteractive:"Schedule-module__I33aDW__nonInteractive",required:"Schedule-module__I33aDW__required",scheduleItems:"Schedule-module__I33aDW__scheduleItems",select:"Schedule-module__I33aDW__select",selected:"Schedule-module__I33aDW__selected",textarea:"Schedule-module__I33aDW__textarea",timeRow:"Schedule-module__I33aDW__timeRow"})},98295,a=>{"use strict";a.s(["CATEGORIES",0,[{value:"work",label:"仕事",defaultColor:"#3B82F6"},{value:"private",label:"プライベート",defaultColor:"#10B981"},{value:"event",label:"イベント",defaultColor:"#F59E0B"},{value:"other",label:"その他",defaultColor:"#8B5CF6"}]])},24050,a=>{"use strict";function b(a,b,d){let e=[],f=new Date(a,b-1,1),g=new Date(a,b,0),h=new Date;h.setHours(0,0,0,0);let i=f.getDay(),j=new Date(a,b-1,0).getDate();for(let f=i-1;f>=0;f--){let g=new Date(a,b-2,j-f);e.push({date:g,isCurrentMonth:!1,isToday:!1,schedules:c(g,d)})}for(let f=1;f<=g.getDate();f++){let g=new Date(a,b-1,f),i=new Date(g);i.setHours(0,0,0,0),e.push({date:g,isCurrentMonth:!0,isToday:i.getTime()===h.getTime(),schedules:c(g,d)})}let k=7-e.length%7;if(k<7)for(let f=1;f<=k;f++){let g=new Date(a,b,f);e.push({date:g,isCurrentMonth:!1,isToday:!1,schedules:c(g,d)})}return e}function c(a,b){let c=d(a);return b.filter(a=>a.date===c).sort((a,b)=>a.startTime.localeCompare(b.startTime))}function d(a){let b=a.getFullYear(),c=String(a.getMonth()+1).padStart(2,"0"),d=String(a.getDate()).padStart(2,"0");return`${b}-${c}-${d}`}function e(a,b){return`${a}年${b}月`}function f(a){return["日","月","火","水","木","金","土"][a]}function g(a){return!!/^\d{4}-\d{2}-\d{2}$/.test(a)&&!isNaN((function(a){let[b,c,d]=a.split("-").map(Number);return new Date(b,c-1,d)})(a).getTime())}function h(a){if(!/^\d{2}:\d{2}$/.test(a))return!1;let[b,c]=a.split(":").map(Number);return b>=0&&b<24&&c>=0&&c<60}function i(a,b){return a<b}a.s(["formatDate",()=>d,"generateCalendarDays",()=>b,"getDayName",()=>f,"getMonthName",()=>e,"isValidDate",()=>g,"isValidTime",()=>h,"isValidTimeRange",()=>i])},68294,a=>{"use strict";var b=a.i(56993),c=a.i(91108),d=a.i(3859),e=a.i(66140),f=a.i(98295),g=a.i(24050),h=a.i(28340);function i({schedule:a,initialDate:e,onSuccess:i,onCancel:j}){let k=(0,d.useRouter)(),[l,m]=(0,c.useState)(!1),[n,o]=(0,c.useState)({}),[p,q]=(0,c.useState)({date:a?.date||(e?(0,g.formatDate)(e):(0,g.formatDate)(new Date)),startTime:a?.startTime||"09:00",endTime:a?.endTime||"10:00",title:a?.title||"",description:a?.description||"",category:a?.category||"other",color:a?.color||f.CATEGORIES.find(a=>"other"===a.value).defaultColor,completed:a?.completed||!1});(0,c.useEffect)(()=>{if(!a){let a=f.CATEGORIES.find(a=>a.value===p.category);a&&q(b=>({...b,color:a.defaultColor}))}},[p.category,a]);let r=a=>{let{name:b,value:c,type:d}=a.target;if("checkbox"===d){let c=a.target.checked;q(a=>({...a,[b]:c}))}else q(a=>({...a,[b]:c}));n[b]&&o(a=>{let c={...a};return delete c[b],c})},s=async b=>{let c;if(b.preventDefault(),c={},p.title.trim()||(c.title="タイトルを入力してください"),(0,g.isValidDate)(p.date)||(c.date="有効な日付を入力してください"),(0,g.isValidTime)(p.startTime)||(c.startTime="有効な時間を入力してください"),(0,g.isValidTime)(p.endTime)||(c.endTime="有効な時間を入力してください"),(0,g.isValidTime)(p.startTime)&&(0,g.isValidTime)(p.endTime)&&!(0,g.isValidTimeRange)(p.startTime,p.endTime)&&(c.endTime="終了時間は開始時間より後にしてください"),o(c),0===Object.keys(c).length)try{m(!0);let b=a?`/api/schedules/${a.id}`:"/api/schedules",c=a?"PUT":"POST",d=await fetch(b,{method:c,headers:{"Content-Type":"application/json"},body:JSON.stringify(p)}),e=await d.json();e.success?i?i():(k.push("/"),k.refresh()):alert(e.error||"保存に失敗しました")}catch(a){console.error("Failed to save schedule:",a),alert("保存中にエラーが発生しました")}finally{m(!1)}},t=async()=>{if(a&&confirm("この予定を削除しますか？"))try{m(!0);let b=await fetch(`/api/schedules/${a.id}`,{method:"DELETE"}),c=await b.json();c.success?(k.push("/"),k.refresh()):alert(c.error||"削除に失敗しました")}catch(a){console.error("Failed to delete schedule:",a),alert("削除中にエラーが発生しました")}finally{m(!1)}};return(0,b.jsxs)("form",{className:h.default.form,onSubmit:s,children:[(0,b.jsxs)("div",{className:h.default.formGroup,children:[(0,b.jsxs)("label",{htmlFor:"title",className:h.default.label,children:["タイトル",(0,b.jsx)("span",{className:h.default.required,children:"*"})]}),(0,b.jsx)("input",{type:"text",id:"title",name:"title",value:p.title,onChange:r,className:h.default.input,placeholder:"予定のタイトル"}),n.title&&(0,b.jsx)("div",{className:h.default.error,children:n.title})]}),(0,b.jsxs)("div",{className:h.default.formGroup,children:[(0,b.jsxs)("label",{htmlFor:"date",className:h.default.label,children:["日付",(0,b.jsx)("span",{className:h.default.required,children:"*"})]}),(0,b.jsx)("input",{type:"date",id:"date",name:"date",value:p.date,onChange:r,className:h.default.input}),n.date&&(0,b.jsx)("div",{className:h.default.error,children:n.date})]}),(0,b.jsxs)("div",{className:h.default.timeRow,children:[(0,b.jsxs)("div",{className:h.default.formGroup,children:[(0,b.jsxs)("label",{htmlFor:"startTime",className:h.default.label,children:["開始時間",(0,b.jsx)("span",{className:h.default.required,children:"*"})]}),(0,b.jsx)("input",{type:"time",id:"startTime",name:"startTime",value:p.startTime,onChange:r,className:h.default.input}),n.startTime&&(0,b.jsx)("div",{className:h.default.error,children:n.startTime})]}),(0,b.jsxs)("div",{className:h.default.formGroup,children:[(0,b.jsxs)("label",{htmlFor:"endTime",className:h.default.label,children:["終了時間",(0,b.jsx)("span",{className:h.default.required,children:"*"})]}),(0,b.jsx)("input",{type:"time",id:"endTime",name:"endTime",value:p.endTime,onChange:r,className:h.default.input}),n.endTime&&(0,b.jsx)("div",{className:h.default.error,children:n.endTime})]})]}),(0,b.jsxs)("div",{className:h.default.formGroup,children:[(0,b.jsx)("label",{htmlFor:"category",className:h.default.label,children:"カテゴリー"}),(0,b.jsx)("select",{id:"category",name:"category",value:p.category,onChange:r,className:h.default.select,children:f.CATEGORIES.map(a=>(0,b.jsx)("option",{value:a.value,children:a.label},a.value))})]}),(0,b.jsxs)("div",{className:h.default.formGroup,children:[(0,b.jsx)("label",{className:h.default.label,children:"色"}),(0,b.jsx)("div",{className:h.default.colorPicker,children:f.CATEGORIES.map(a=>(0,b.jsx)("button",{type:"button",className:`${h.default.colorOption} ${p.color===a.defaultColor?h.default.selected:""}`,style:{backgroundColor:a.defaultColor},onClick:()=>{var b;return b=a.defaultColor,void q(a=>({...a,color:b}))},"aria-label":`${a.label}の色`},a.defaultColor))})]}),(0,b.jsxs)("div",{className:h.default.formGroup,children:[(0,b.jsx)("label",{htmlFor:"description",className:h.default.label,children:"詳細"}),(0,b.jsx)("textarea",{id:"description",name:"description",value:p.description,onChange:r,className:h.default.textarea,placeholder:"予定の詳細説明"})]}),(0,b.jsx)("div",{className:h.default.formGroup,children:(0,b.jsxs)("div",{className:h.default.checkbox,children:[(0,b.jsx)("input",{type:"checkbox",id:"completed",name:"completed",checked:p.completed,onChange:r}),(0,b.jsx)("label",{htmlFor:"completed",className:h.default.label,children:"完了済み"})]})}),(0,b.jsxs)("div",{className:h.default.buttons,children:[a&&(0,b.jsx)("button",{type:"button",className:`${h.default.button} ${h.default.buttonDanger}`,onClick:t,disabled:l,children:"削除"}),j&&(0,b.jsx)("button",{type:"button",className:`${h.default.button} ${h.default.buttonSecondary}`,onClick:j,disabled:l,children:"キャンセル"}),(0,b.jsx)("button",{type:"submit",className:`${h.default.button} ${h.default.buttonPrimary}`,disabled:l,children:l?"保存中...":a?"更新":"作成"})]})]})}function j(){let a=(0,d.useParams)(),f=(0,d.useRouter)(),[g,h]=(0,c.useState)(null),[j,k]=(0,c.useState)(!0),[l,m]=(0,c.useState)(null);(0,c.useEffect)(()=>{n()},[a.id]);let n=async()=>{try{k(!0);let b=await fetch(`/api/schedules/${a.id}`),c=await b.json();c.success?h(c.data):m(c.error||"予定の取得に失敗しました")}catch(a){m("予定の取得中にエラーが発生しました"),console.error(a)}finally{k(!1)}};return j?(0,b.jsx)("div",{className:"container",children:(0,b.jsx)("div",{style:{textAlign:"center",padding:"40px",color:"#6b7280"},children:"読み込み中..."})}):l||!g?(0,b.jsxs)("div",{className:"container",children:[(0,b.jsx)("div",{style:{textAlign:"center",padding:"40px",color:"#ef4444"},children:l||"予定が見つかりません"}),(0,b.jsx)("div",{style:{textAlign:"center"},children:(0,b.jsx)(e.default,{href:"/schedules",className:"btn btn-secondary",children:"予定一覧に戻る"})})]}):(0,b.jsxs)("div",{className:"container",children:[(0,b.jsx)("h1",{className:"page-title",children:"予定を編集"}),(0,b.jsx)(i,{schedule:g,onSuccess:()=>{f.push(`/schedules/${a.id}`),f.refresh()},onCancel:()=>{f.push(`/schedules/${a.id}`)}})]})}a.s(["default",()=>j],68294)}];

//# sourceMappingURL=%5Broot-of-the-server%5D__e34a3fda._.js.map