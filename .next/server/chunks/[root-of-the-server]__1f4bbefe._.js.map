{"version":3,"sources":["../../../../calenderapp/node_modules/node-tesseract-ocr/src/index.js"],"sourcesContent":["const exec = require(\"child_process\").exec\nconst log = console.debug\n\n/**\n * @param input - URL, local image path or Buffer\n * @param config - any OCR options and control parameters\n * @returns default output format is text\n */\nfunction recognize(input, config = {}) {\n  const options = getOptions(config)\n  const binary = config.binary || \"tesseract\"\n  const isSingleLocalFile = typeof input === \"string\" && !input.match(/^https?:\\/\\//)\n  const inputOption = isSingleLocalFile ? `\"${input}\"` : \"stdin\"\n  const command = [binary, inputOption, \"stdout\", ...options].join(\" \")\n\n  if (config.debug) log(\"command\", command)\n\n  return new Promise((resolve, reject) => {\n    const child = exec(command, (error, stdout, stderr) => {\n      if (config.debug) log(stderr)\n      if (error) reject(error)\n      resolve(stdout)\n    })\n    if (inputOption === \"stdin\") pipeInput(input, child)\n  })\n}\n\nfunction pipeInput(input, child) {\n  if (typeof input === \"string\") {\n    const protocol = input.match(/^(.*?):/)[1]\n    return require(protocol).get(input, (response) => {\n      response.pipe(child.stdin)\n    })\n  }\n\n  if (Array.isArray(input)) input = Buffer.from(input.join(\"\\n\"), \"utf-8\")\n  child.stdin.write(input)\n  child.stdin.end()\n}\n\nfunction getOptions(config) {\n  const ocrOptions = [\"tessdata-dir\", \"user-words\", \"user-patterns\", \"psm\", \"oem\", \"dpi\"]\n\n  return Object.entries(config)\n    .map(([key, value]) => {\n      if ([\"debug\", \"presets\", \"binary\"].includes(key)) return\n      if (key === \"lang\") return `-l ${value}`\n      if (ocrOptions.includes(key)) return `--${key} ${value}`\n\n      return `-c ${key}=${value}`\n    })\n    .concat(config.presets) // options -l and --psm must occur before any CONFIGFILE\n    .filter(Boolean)\n}\n\nmodule.exports = {\n  recognize,\n}\n"],"names":[],"mappings":"6GAAA,IAAM,EAAO,EAAA,CAAA,CAAA,OAAyB,IAAI,CACpC,EAAM,QAAQ,KAAK,CAsDzB,EAAO,OAAO,CAAG,CACf,UAhDF,SAAS,AAAU,CAAK,CAAE,EAAS,CAAC,CAAC,cAC7B,GAgCA,EAAa,CAAC,IAhCJ,WAgCoB,aAAc,gBAAiB,MAAO,MAAO,MAAM,CAEhF,OAAO,OAAO,CAAC,AAHJ,EA/BS,GAmCxB,CAJqB,EAIlB,CAAC,CAAC,CAAC,EAAK,EAAM,IAChB,IAAI,CAAC,QAAS,UAAW,SAAS,CAAC,QAAQ,CAAC,MAAM,GACtC,AAAZ,QAAoB,CAAhB,EAAuB,CAAC,GAAG,EAAE,EAAA,CAAO,CACpC,EAAW,QAAQ,CAAC,GAAa,CAAC,EAAR,AAAU,EAAE,EAAI,CAAC,EAAE,EAAA,CAAO,CAEjD,CAAC,GAAG,EAAE,EAAI,CAAC,EAAE,EAAA,CAAO,AAC7B,GACC,MAAM,CAAC,EAAO,OAAO,EAAE,AACvB,MAAM,CAAC,UA1CJ,EAAS,EAAO,MAAM,EAAI,YAE1B,EADqC,AACvB,UADM,EAA6B,CAwC2B,IAxCjD,GAAuB,EAAM,KAAK,CAAC,gBACb,QAAf,CAAC,CAAC,EAAE,EAAM,CAAC,CAAC,CAC9C,EAAU,CAAC,EAAQ,EAAa,YAAa,EAAQ,CAAC,IAAI,CAAC,KAIjE,OAFI,EAAO,KAAK,EAAE,EAAI,UAAW,GAE1B,IAAI,QAAQ,CAAC,EAAS,KAC3B,IAAM,EAAQ,EAAK,EAAS,CAAC,EAAO,EAAQ,KACtC,EAAO,KAAK,EAAE,EAAI,GAClB,GAAO,EAAO,GAClB,EAAQ,EACV,GACoB,UAAhB,GAAyB,AAIjC,SAAS,AAAU,CAAK,CAAE,CAAK,EAC7B,GAAqB,UAAU,AAA3B,OAAO,EAET,OADiB,EAAM,KAAK,CAAC,UAAU,CAAC,EAAE,CACnC,CAAA,0GAAkB,GAAG,CAAC,EAAQ,AAAD,IAClC,EAAS,IAAI,CAAC,EAAM,KAAK,CAC3B,GAGE,MAAM,OAAO,CAAC,KAAQ,EAAQ,OAAO,IAAI,CAAC,EAAM,IAAI,CAAC,MAAO,QAAA,EAChE,EAAM,KAAK,CAAC,KAAK,CAAC,GAClB,EAAM,KAAK,CAAC,GAAG,EACjB,EAf2C,EAAO,EAChD,EACF,CAgCA","ignoreList":[0]}