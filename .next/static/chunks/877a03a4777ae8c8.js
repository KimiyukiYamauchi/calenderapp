(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,78971,(e,t,l)=>{t.exports=e.r(37911)},676,e=>{e.v({button:"Schedule-module__I33aDW__button",buttonDanger:"Schedule-module__I33aDW__buttonDanger",buttonPrimary:"Schedule-module__I33aDW__buttonPrimary",buttonSecondary:"Schedule-module__I33aDW__buttonSecondary",buttons:"Schedule-module__I33aDW__buttons",card:"Schedule-module__I33aDW__card",cardBadge:"Schedule-module__I33aDW__cardBadge",cardCompleted:"Schedule-module__I33aDW__cardCompleted",cardDescription:"Schedule-module__I33aDW__cardDescription",cardHeader:"Schedule-module__I33aDW__cardHeader",cardMeta:"Schedule-module__I33aDW__cardMeta",cardTitle:"Schedule-module__I33aDW__cardTitle",checkbox:"Schedule-module__I33aDW__checkbox",colorOption:"Schedule-module__I33aDW__colorOption",colorPicker:"Schedule-module__I33aDW__colorPicker",empty:"Schedule-module__I33aDW__empty",error:"Schedule-module__I33aDW__error",form:"Schedule-module__I33aDW__form",formGroup:"Schedule-module__I33aDW__formGroup",input:"Schedule-module__I33aDW__input",label:"Schedule-module__I33aDW__label",list:"Schedule-module__I33aDW__list",listHeader:"Schedule-module__I33aDW__listHeader",listTitle:"Schedule-module__I33aDW__listTitle",nonInteractive:"Schedule-module__I33aDW__nonInteractive",required:"Schedule-module__I33aDW__required",scheduleItems:"Schedule-module__I33aDW__scheduleItems",select:"Schedule-module__I33aDW__select",selected:"Schedule-module__I33aDW__selected",textarea:"Schedule-module__I33aDW__textarea",timeRow:"Schedule-module__I33aDW__timeRow"})},90261,e=>{"use strict";e.s(["CATEGORIES",0,[{value:"work",label:"仕事",defaultColor:"#3B82F6"},{value:"private",label:"プライベート",defaultColor:"#10B981"},{value:"event",label:"イベント",defaultColor:"#F59E0B"},{value:"other",label:"その他",defaultColor:"#8B5CF6"}]])},35442,e=>{"use strict";function t(e,t,a){let d=[],r=new Date(e,t-1,1),s=new Date(e,t,0),i=new Date;i.setHours(0,0,0,0);let c=r.getDay(),o=new Date(e,t-1,0).getDate();for(let r=c-1;r>=0;r--){let s=new Date(e,t-2,o-r);d.push({date:s,isCurrentMonth:!1,isToday:!1,schedules:l(s,a)})}for(let r=1;r<=s.getDate();r++){let s=new Date(e,t-1,r),c=new Date(s);c.setHours(0,0,0,0),d.push({date:s,isCurrentMonth:!0,isToday:c.getTime()===i.getTime(),schedules:l(s,a)})}let u=7-d.length%7;if(u<7)for(let r=1;r<=u;r++){let s=new Date(e,t,r);d.push({date:s,isCurrentMonth:!1,isToday:!1,schedules:l(s,a)})}return d}function l(e,t){let l=a(e);return t.filter(e=>e.date===l).sort((e,t)=>e.startTime.localeCompare(t.startTime))}function a(e){let t=e.getFullYear(),l=String(e.getMonth()+1).padStart(2,"0"),a=String(e.getDate()).padStart(2,"0");return`${t}-${l}-${a}`}function d(e,t){return`${e}年${t}月`}function r(e){return["日","月","火","水","木","金","土"][e]}function s(e){return!!/^\d{4}-\d{2}-\d{2}$/.test(e)&&!isNaN((function(e){let[t,l,a]=e.split("-").map(Number);return new Date(t,l-1,a)})(e).getTime())}function i(e){if(!/^\d{2}:\d{2}$/.test(e))return!1;let[t,l]=e.split(":").map(Number);return t>=0&&t<24&&l>=0&&l<60}function c(e,t){return e<t}e.s(["formatDate",()=>a,"generateCalendarDays",()=>t,"getDayName",()=>r,"getMonthName",()=>d,"isValidDate",()=>s,"isValidTime",()=>i,"isValidTimeRange",()=>c])},87120,e=>{"use strict";var t=e.i(45802),l=e.i(71197),a=e.i(78971),d=e.i(32497),r=e.i(90261),s=e.i(35442),i=e.i(676);function c({schedule:e,initialDate:d,onSuccess:c,onCancel:o}){let u=(0,a.useRouter)(),[n,m]=(0,l.useState)(!1),[h,_]=(0,l.useState)({}),[f,p]=(0,l.useState)({date:e?.date||(d?(0,s.formatDate)(d):(0,s.formatDate)(new Date)),startTime:e?.startTime||"09:00",endTime:e?.endTime||"10:00",title:e?.title||"",description:e?.description||"",category:e?.category||"other",color:e?.color||r.CATEGORIES.find(e=>"other"===e.value).defaultColor,completed:e?.completed||!1});(0,l.useEffect)(()=>{if(!e){let e=r.CATEGORIES.find(e=>e.value===f.category);e&&p(t=>({...t,color:e.defaultColor}))}},[f.category,e]);let b=e=>{let{name:t,value:l,type:a}=e.target;if("checkbox"===a){let l=e.target.checked;p(e=>({...e,[t]:l}))}else p(e=>({...e,[t]:l}));h[t]&&_(e=>{let l={...e};return delete l[t],l})},x=async t=>{let l;if(t.preventDefault(),l={},f.title.trim()||(l.title="タイトルを入力してください"),(0,s.isValidDate)(f.date)||(l.date="有効な日付を入力してください"),(0,s.isValidTime)(f.startTime)||(l.startTime="有効な時間を入力してください"),(0,s.isValidTime)(f.endTime)||(l.endTime="有効な時間を入力してください"),(0,s.isValidTime)(f.startTime)&&(0,s.isValidTime)(f.endTime)&&!(0,s.isValidTimeRange)(f.startTime,f.endTime)&&(l.endTime="終了時間は開始時間より後にしてください"),_(l),0===Object.keys(l).length)try{m(!0);let t=e?`/api/schedules/${e.id}`:"/api/schedules",l=e?"PUT":"POST",a=await fetch(t,{method:l,headers:{"Content-Type":"application/json"},body:JSON.stringify(f)}),d=await a.json();d.success?c?c():(u.push("/"),u.refresh()):alert(d.error||"保存に失敗しました")}catch(e){console.error("Failed to save schedule:",e),alert("保存中にエラーが発生しました")}finally{m(!1)}},D=async()=>{if(e&&confirm("この予定を削除しますか？"))try{m(!0);let t=await fetch(`/api/schedules/${e.id}`,{method:"DELETE"}),l=await t.json();l.success?(u.push("/"),u.refresh()):alert(l.error||"削除に失敗しました")}catch(e){console.error("Failed to delete schedule:",e),alert("削除中にエラーが発生しました")}finally{m(!1)}};return(0,t.jsxs)("form",{className:i.default.form,onSubmit:x,children:[(0,t.jsxs)("div",{className:i.default.formGroup,children:[(0,t.jsxs)("label",{htmlFor:"title",className:i.default.label,children:["タイトル",(0,t.jsx)("span",{className:i.default.required,children:"*"})]}),(0,t.jsx)("input",{type:"text",id:"title",name:"title",value:f.title,onChange:b,className:i.default.input,placeholder:"予定のタイトル"}),h.title&&(0,t.jsx)("div",{className:i.default.error,children:h.title})]}),(0,t.jsxs)("div",{className:i.default.formGroup,children:[(0,t.jsxs)("label",{htmlFor:"date",className:i.default.label,children:["日付",(0,t.jsx)("span",{className:i.default.required,children:"*"})]}),(0,t.jsx)("input",{type:"date",id:"date",name:"date",value:f.date,onChange:b,className:i.default.input}),h.date&&(0,t.jsx)("div",{className:i.default.error,children:h.date})]}),(0,t.jsxs)("div",{className:i.default.timeRow,children:[(0,t.jsxs)("div",{className:i.default.formGroup,children:[(0,t.jsxs)("label",{htmlFor:"startTime",className:i.default.label,children:["開始時間",(0,t.jsx)("span",{className:i.default.required,children:"*"})]}),(0,t.jsx)("input",{type:"time",id:"startTime",name:"startTime",value:f.startTime,onChange:b,className:i.default.input}),h.startTime&&(0,t.jsx)("div",{className:i.default.error,children:h.startTime})]}),(0,t.jsxs)("div",{className:i.default.formGroup,children:[(0,t.jsxs)("label",{htmlFor:"endTime",className:i.default.label,children:["終了時間",(0,t.jsx)("span",{className:i.default.required,children:"*"})]}),(0,t.jsx)("input",{type:"time",id:"endTime",name:"endTime",value:f.endTime,onChange:b,className:i.default.input}),h.endTime&&(0,t.jsx)("div",{className:i.default.error,children:h.endTime})]})]}),(0,t.jsxs)("div",{className:i.default.formGroup,children:[(0,t.jsx)("label",{htmlFor:"category",className:i.default.label,children:"カテゴリー"}),(0,t.jsx)("select",{id:"category",name:"category",value:f.category,onChange:b,className:i.default.select,children:r.CATEGORIES.map(e=>(0,t.jsx)("option",{value:e.value,children:e.label},e.value))})]}),(0,t.jsxs)("div",{className:i.default.formGroup,children:[(0,t.jsx)("label",{className:i.default.label,children:"色"}),(0,t.jsx)("div",{className:i.default.colorPicker,children:r.CATEGORIES.map(e=>(0,t.jsx)("button",{type:"button",className:`${i.default.colorOption} ${f.color===e.defaultColor?i.default.selected:""}`,style:{backgroundColor:e.defaultColor},onClick:()=>{var t;return t=e.defaultColor,void p(e=>({...e,color:t}))},"aria-label":`${e.label}の色`},e.defaultColor))})]}),(0,t.jsxs)("div",{className:i.default.formGroup,children:[(0,t.jsx)("label",{htmlFor:"description",className:i.default.label,children:"詳細"}),(0,t.jsx)("textarea",{id:"description",name:"description",value:f.description,onChange:b,className:i.default.textarea,placeholder:"予定の詳細説明"})]}),(0,t.jsx)("div",{className:i.default.formGroup,children:(0,t.jsxs)("div",{className:i.default.checkbox,children:[(0,t.jsx)("input",{type:"checkbox",id:"completed",name:"completed",checked:f.completed,onChange:b}),(0,t.jsx)("label",{htmlFor:"completed",className:i.default.label,children:"完了済み"})]})}),(0,t.jsxs)("div",{className:i.default.buttons,children:[e&&(0,t.jsx)("button",{type:"button",className:`${i.default.button} ${i.default.buttonDanger}`,onClick:D,disabled:n,children:"削除"}),o&&(0,t.jsx)("button",{type:"button",className:`${i.default.button} ${i.default.buttonSecondary}`,onClick:o,disabled:n,children:"キャンセル"}),(0,t.jsx)("button",{type:"submit",className:`${i.default.button} ${i.default.buttonPrimary}`,disabled:n,children:n?"保存中...":e?"更新":"作成"})]})]})}function o(){let e=(0,a.useParams)(),r=(0,a.useRouter)(),[s,i]=(0,l.useState)(null),[o,u]=(0,l.useState)(!0),[n,m]=(0,l.useState)(null);(0,l.useEffect)(()=>{h()},[e.id]);let h=async()=>{try{u(!0);let t=await fetch(`/api/schedules/${e.id}`),l=await t.json();l.success?i(l.data):m(l.error||"予定の取得に失敗しました")}catch(e){m("予定の取得中にエラーが発生しました"),console.error(e)}finally{u(!1)}};return o?(0,t.jsx)("div",{className:"container",children:(0,t.jsx)("div",{style:{textAlign:"center",padding:"40px",color:"#6b7280"},children:"読み込み中..."})}):n||!s?(0,t.jsxs)("div",{className:"container",children:[(0,t.jsx)("div",{style:{textAlign:"center",padding:"40px",color:"#ef4444"},children:n||"予定が見つかりません"}),(0,t.jsx)("div",{style:{textAlign:"center"},children:(0,t.jsx)(d.default,{href:"/schedules",className:"btn btn-secondary",children:"予定一覧に戻る"})})]}):(0,t.jsxs)("div",{className:"container",children:[(0,t.jsx)("h1",{className:"page-title",children:"予定を編集"}),(0,t.jsx)(c,{schedule:s,onSuccess:()=>{r.push(`/schedules/${e.id}`),r.refresh()},onCancel:()=>{r.push(`/schedules/${e.id}`)}})]})}e.s(["default",()=>o],87120)}]);