(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,78971,(e,t,a)=>{t.exports=e.r(37911)},676,e=>{e.v({button:"Schedule-module__I33aDW__button",buttonDanger:"Schedule-module__I33aDW__buttonDanger",buttonPrimary:"Schedule-module__I33aDW__buttonPrimary",buttonSecondary:"Schedule-module__I33aDW__buttonSecondary",buttons:"Schedule-module__I33aDW__buttons",card:"Schedule-module__I33aDW__card",cardBadge:"Schedule-module__I33aDW__cardBadge",cardCompleted:"Schedule-module__I33aDW__cardCompleted",cardDescription:"Schedule-module__I33aDW__cardDescription",cardHeader:"Schedule-module__I33aDW__cardHeader",cardMeta:"Schedule-module__I33aDW__cardMeta",cardTitle:"Schedule-module__I33aDW__cardTitle",checkbox:"Schedule-module__I33aDW__checkbox",colorOption:"Schedule-module__I33aDW__colorOption",colorPicker:"Schedule-module__I33aDW__colorPicker",empty:"Schedule-module__I33aDW__empty",error:"Schedule-module__I33aDW__error",form:"Schedule-module__I33aDW__form",formGroup:"Schedule-module__I33aDW__formGroup",input:"Schedule-module__I33aDW__input",label:"Schedule-module__I33aDW__label",list:"Schedule-module__I33aDW__list",listHeader:"Schedule-module__I33aDW__listHeader",listTitle:"Schedule-module__I33aDW__listTitle",nonInteractive:"Schedule-module__I33aDW__nonInteractive",required:"Schedule-module__I33aDW__required",scheduleItems:"Schedule-module__I33aDW__scheduleItems",select:"Schedule-module__I33aDW__select",selected:"Schedule-module__I33aDW__selected",textarea:"Schedule-module__I33aDW__textarea",timeRow:"Schedule-module__I33aDW__timeRow"})},35442,e=>{"use strict";function t(e,t,l){let d=[],o=new Date(e,t-1,1),r=new Date(e,t,0),n=new Date;n.setHours(0,0,0,0);let u=o.getDay(),s=new Date(e,t-1,0).getDate();for(let o=u-1;o>=0;o--){let r=new Date(e,t-2,s-o);d.push({date:r,isCurrentMonth:!1,isToday:!1,schedules:a(r,l)})}for(let o=1;o<=r.getDate();o++){let r=new Date(e,t-1,o),u=new Date(r);u.setHours(0,0,0,0),d.push({date:r,isCurrentMonth:!0,isToday:u.getTime()===n.getTime(),schedules:a(r,l)})}let i=7-d.length%7;if(i<7)for(let o=1;o<=i;o++){let r=new Date(e,t,o);d.push({date:r,isCurrentMonth:!1,isToday:!1,schedules:a(r,l)})}return d}function a(e,t){let a=l(e);return t.filter(e=>e.date===a).sort((e,t)=>e.startTime.localeCompare(t.startTime))}function l(e){let t=e.getFullYear(),a=String(e.getMonth()+1).padStart(2,"0"),l=String(e.getDate()).padStart(2,"0");return`${t}-${a}-${l}`}function d(e,t){return`${e}年${t}月`}function o(e){return["日","月","火","水","木","金","土"][e]}function r(e){return!!/^\d{4}-\d{2}-\d{2}$/.test(e)&&!isNaN((function(e){let[t,a,l]=e.split("-").map(Number);return new Date(t,a-1,l)})(e).getTime())}function n(e){if(!/^\d{2}:\d{2}$/.test(e))return!1;let[t,a]=e.split(":").map(Number);return t>=0&&t<24&&a>=0&&a<60}function u(e,t){return e<t}e.s(["formatDate",()=>l,"generateCalendarDays",()=>t,"getDayName",()=>o,"getMonthName",()=>d,"isValidDate",()=>r,"isValidTime",()=>n,"isValidTimeRange",()=>u])},90261,e=>{"use strict";e.s(["CATEGORIES",0,[{value:"work",label:"仕事",defaultColor:"#3B82F6"},{value:"private",label:"プライベート",defaultColor:"#10B981"},{value:"event",label:"イベント",defaultColor:"#F59E0B"},{value:"other",label:"その他",defaultColor:"#8B5CF6"}]])},95247,e=>{e.v({calendar:"Calendar-module__G1O1Vq__calendar",container:"Calendar-module__G1O1Vq__container",day:"Calendar-module__G1O1Vq__day",dayNumber:"Calendar-module__G1O1Vq__dayNumber",days:"Calendar-module__G1O1Vq__days",error:"Calendar-module__G1O1Vq__error",gotoButton:"Calendar-module__G1O1Vq__gotoButton",gotoForm:"Calendar-module__G1O1Vq__gotoForm",gotoInput:"Calendar-module__G1O1Vq__gotoInput",gotoSelect:"Calendar-module__G1O1Vq__gotoSelect",header:"Calendar-module__G1O1Vq__header",loading:"Calendar-module__G1O1Vq__loading",monthTitle:"Calendar-module__G1O1Vq__monthTitle",navButton:"Calendar-module__G1O1Vq__navButton",navigation:"Calendar-module__G1O1Vq__navigation",otherMonth:"Calendar-module__G1O1Vq__otherMonth",saturday:"Calendar-module__G1O1Vq__saturday",scheduleCount:"Calendar-module__G1O1Vq__scheduleCount",scheduleItem:"Calendar-module__G1O1Vq__scheduleItem",scheduleList:"Calendar-module__G1O1Vq__scheduleList",sunday:"Calendar-module__G1O1Vq__sunday",today:"Calendar-module__G1O1Vq__today",todayButton:"Calendar-module__G1O1Vq__todayButton",weekDay:"Calendar-module__G1O1Vq__weekDay",weekDays:"Calendar-module__G1O1Vq__weekDays"})},91441,e=>{"use strict";var t=e.i(45802),a=e.i(71197),l=e.i(78971),d=e.i(35442),o=e.i(95247),r=e.i(90261),n=e.i(676);function u({initialDate:e,onClose:o,onSaved:u}){(0,l.useRouter)();let[s,i]=(0,a.useState)(!1),[c,_]=(0,a.useState)({date:(0,d.formatDate)(e),startTime:"09:00",endTime:"10:00",title:"",description:"",category:"other",color:r.CATEGORIES[3].defaultColor,completed:!1}),m=async e=>{if(e.preventDefault(),!c.title.trim())return void alert("タイトルを入力してください");try{i(!0);let e=await fetch("/api/schedules",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(c)}),t=await e.json();t.success?u():alert(t.error||"保存に失敗しました")}catch(e){console.error("Failed to save schedule:",e),alert("保存中にエラーが発生しました")}finally{i(!1)}};return(0,t.jsx)("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},onClick:o,children:(0,t.jsxs)("div",{style:{backgroundColor:"white",padding:"24px",borderRadius:"8px",maxWidth:"500px",width:"90%",maxHeight:"90vh",overflow:"auto"},onClick:e=>e.stopPropagation(),children:[(0,t.jsxs)("h2",{style:{marginBottom:"20px",fontSize:"20px",fontWeight:"600"},children:["予定を追加 - ",(0,d.formatDate)(e)]}),(0,t.jsxs)("form",{onSubmit:m,children:[(0,t.jsxs)("div",{style:{marginBottom:"16px"},children:[(0,t.jsxs)("label",{style:{display:"block",marginBottom:"6px",fontWeight:"600"},children:["タイトル",(0,t.jsx)("span",{style:{color:"#ef4444"},children:"*"})]}),(0,t.jsx)("input",{type:"text",value:c.title,onChange:e=>_(t=>({...t,title:e.target.value})),className:n.default.input,placeholder:"予定のタイトル",autoFocus:!0})]}),(0,t.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"12px",marginBottom:"16px"},children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{style:{display:"block",marginBottom:"6px",fontWeight:"600"},children:"開始時間"}),(0,t.jsx)("input",{type:"time",value:c.startTime,onChange:e=>_(t=>({...t,startTime:e.target.value})),className:n.default.input})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{style:{display:"block",marginBottom:"6px",fontWeight:"600"},children:"終了時間"}),(0,t.jsx)("input",{type:"time",value:c.endTime,onChange:e=>_(t=>({...t,endTime:e.target.value})),className:n.default.input})]})]}),(0,t.jsxs)("div",{style:{marginBottom:"16px"},children:[(0,t.jsx)("label",{style:{display:"block",marginBottom:"6px",fontWeight:"600"},children:"カテゴリー"}),(0,t.jsx)("select",{value:c.category,onChange:e=>{let t=r.CATEGORIES.find(t=>t.value===e.target.value);_(a=>({...a,category:e.target.value,color:t?.defaultColor||a.color}))},className:n.default.select,children:r.CATEGORIES.map(e=>(0,t.jsx)("option",{value:e.value,children:e.label},e.value))})]}),(0,t.jsxs)("div",{style:{display:"flex",gap:"12px",justifyContent:"flex-end"},children:[(0,t.jsx)("button",{type:"button",onClick:o,className:`${n.default.button} ${n.default.buttonSecondary}`,disabled:s,children:"キャンセル"}),(0,t.jsx)("button",{type:"submit",className:`${n.default.button} ${n.default.buttonPrimary}`,disabled:s,children:s?"保存中...":"保存"})]})]})]})})}function s({onDayClick:e}){let[r,n]=(0,a.useState)(new Date),[s,i]=(0,a.useState)([]),[c,_]=(0,a.useState)([]),[m,h]=(0,a.useState)(!0),[f,g]=(0,a.useState)(null),[p,y]=(0,a.useState)(!1),[x,D]=(0,a.useState)(null),C=r.getFullYear(),b=r.getMonth()+1,v=(0,l.useSearchParams)(),[S,j]=(0,a.useState)(C),[I,N]=(0,a.useState)(b);(0,a.useEffect)(()=>{j(C),N(b)},[C,b]),(0,a.useEffect)(()=>{let e=v?.get?.("focus");if(e){let t=new Date(e);isNaN(t.getTime())||n(new Date(t.getFullYear(),t.getMonth(),1))}},[v]),(0,a.useEffect)(()=>{T()},[C,b]),(0,a.useEffect)(()=>{_((0,d.generateCalendarDays)(C,b,s))},[C,b,s]);let T=async()=>{try{h(!0),g(null);let e=await fetch(`/api/schedules?year=${C}&month=${b}`),t=await e.json();t.success?i(t.data||[]):g(t.error||"予定の取得に失敗しました")}catch(e){g("予定の取得中にエラーが発生しました"),console.error(e)}finally{h(!1)}},W=()=>{y(!1),D(null)},O=async()=>{W(),await T()};return m?(0,t.jsx)("div",{className:o.default.loading,children:"読み込み中..."}):f?(0,t.jsx)("div",{className:o.default.error,children:f}):(0,t.jsxs)("div",{className:o.default.container,children:[(0,t.jsxs)("div",{className:o.default.header,children:[(0,t.jsxs)("div",{className:o.default.navigation,children:[(0,t.jsx)("button",{className:o.default.navButton,onClick:()=>{n(new Date(C,b-2,1))},"aria-label":"前月",children:"← 前月"}),(0,t.jsx)("button",{className:o.default.navButton,onClick:()=>{n(new Date(C,b,1))},"aria-label":"次月",children:"次月 →"})]}),(0,t.jsxs)("form",{className:o.default.gotoForm,onSubmit:e=>{e.preventDefault();let t=Number(S)||C,a=Number(I)||b;a<1&&(a=1),a>12&&(a=12),n(new Date(t,a-1,1))},children:[(0,t.jsx)("input",{type:"number",className:o.default.gotoInput,value:S,onChange:e=>j(Number(e.target.value||0)),"aria-label":"年",min:1900,max:3e3}),(0,t.jsx)("span",{children:"/"}),(0,t.jsx)("select",{className:o.default.gotoSelect,value:I,onChange:e=>N(Number(e.target.value)),"aria-label":"月",children:Array.from({length:12},(e,t)=>t+1).map(e=>(0,t.jsx)("option",{value:e,children:e},e))}),(0,t.jsx)("button",{type:"submit",className:o.default.gotoButton,children:"移動"})]}),(0,t.jsx)("h2",{className:o.default.monthTitle,children:(0,d.getMonthName)(C,b)}),(0,t.jsx)("button",{className:o.default.todayButton,onClick:()=>{n(new Date)},"aria-label":"今日",children:"今日"})]}),(0,t.jsxs)("div",{className:o.default.calendar,children:[(0,t.jsx)("div",{className:o.default.weekDays,children:[0,1,2,3,4,5,6].map(e=>(0,t.jsx)("div",{className:`${o.default.weekDay} ${0===e?o.default.sunday:6===e?o.default.saturday:""}`,children:(0,d.getDayName)(e)},e))}),(0,t.jsx)("div",{className:o.default.days,children:c.map((a,l)=>{let d=a.date.getDay();return(0,t.jsxs)("div",{className:`${o.default.day} ${!a.isCurrentMonth?o.default.otherMonth:""} ${a.isToday?o.default.today:""} ${0===d?o.default.sunday:""} ${6===d?o.default.saturday:""}`,onClick:()=>{e&&e(a.date,a.schedules)},onDoubleClick:()=>{D(a.date),y(!0)},children:[(0,t.jsx)("div",{className:o.default.dayNumber,children:a.date.getDate()}),(0,t.jsxs)("div",{className:o.default.scheduleList,children:[a.schedules.slice(0,3).map(e=>(0,t.jsxs)("div",{className:o.default.scheduleItem,style:{backgroundColor:e.color},title:`${e.startTime} ${e.title}`,children:[e.startTime," ",e.title]},e.id)),a.schedules.length>3&&(0,t.jsxs)("div",{className:o.default.scheduleCount,children:["他 ",a.schedules.length-3," 件"]})]})]},l)})})]}),p&&x&&(0,t.jsx)(u,{initialDate:x,onClose:W,onSaved:O})]})}e.s(["default",()=>s],91441)}]);